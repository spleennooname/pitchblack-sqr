var _0xe65e=["toLowerCase","indexOf","chrome","getDate","getHours","getMinutes","getSeconds","createElement",".jpg","scaling","bind","thresold","THRESHOLD","SOFT","renderToScreen","viewport","width","height","WEIGHT","DECAY_FACTOR","decay","lastFrameTimeMs","draw","innerWidth","innerHeight","videoWidth","log","videoHeight","rawFBO","devicePixelRatio","projection","ProjectionMatrix","exports","call","defineProperty","__esModule","default","hasOwnProperty","prototype","length","charCodeAt","toBlobHD","toBlob","image/png","mozGetAsFile","canvas","msToBlob","apply","substring","test","fake","encoding","base64","URI","data","size","toDataURLHD","toDataURL","undefined","document","createElementNS","http://www.w3.org/1999/xhtml","download","click","dispatchEvent","HTMLElement","safari","userAgent","setImmediate","setTimeout","application/octet-stream","string","revokeObjectURL","remove","concat","function","type","writestart progress write writeend","split","onloadend","result","replace","data:attachment/file;","open","_blank","location","href","readyState","INIT","createObjectURL","DONE","msSaveOrOpenBlob","name","abort","WRITING","onwritestart","onwrite","onabort","onerror","content","saveAs","define cannot be used indirect","#ui","$nextTick","constraints","mediaDevices","getUserMedia","then","catch","fail","noSupport","stream","Loader","loadAssets","glsl/thresold.glsl","glsl/godray.glsl","post.glsl","webcam","sqr","hud","show","video","loop","muted","setAttribute","webkit-playsinline","playsinline","Renderer","#gl","clearColor","FrameBuffer","postFBO","thresoldFBO","post","Primitives","createPostEffect","thresold.glsl","camera","Transform","root","add","texture","Texture","renderer","context","LINEAR","Shader","GLSL","use","setUniform","uTexture","plane","createPlane","update","rotation","shader","isTouch","ontouchstart","mousemove","addEventListener","resize","GUI","gui","addFolder","rays","weight","params","black & white","invert","threshold","quality","step","onChange","set_quality","render","image/jpeg"];!function(e,x){!function(x){for(;--x;)e.push(e.shift())}(++x)}(_0xe65e,384);var _0xee65=function(e,x){return e-=0,_0xe65e[e]};!function(e){function x(i){if(t[i])return t[i][_0xee65("0x0")];var _=t[i]={i:i,l:![],exports:{}};return e[i][_0xee65("0x1")](_[_0xee65("0x0")],_,_[_0xee65("0x0")],x),_.l=!![],_.exports}var t={};x.m=e,x.c=t,x.d=function(e,t,i){x.o(e,t)||Object[_0xee65("0x2")](e,t,{configurable:![],enumerable:!![],get:i})},x.n=function(e){var t=e&&e[_0xee65("0x3")]?function(){return e[_0xee65("0x4")]}:function(){return e};return x.d(t,"a",t),t},x.o=function(e,x){return Object.prototype[_0xee65("0x5")].call(e,x)},x.p="",x(x.s=0)}([function(e,x,t){e.exports=t(1)},function(e,x,t){"use strict";t(2),t(3),t(4),t(5),t(6),t(9)},function(e,x){},function(e,x){},function(e,x){},function(e,x,t){"use strict";!function(e){var x,t=e.Uint8Array,i=e.HTMLCanvasElement,_=i&&i[_0xee65("0x6")],n=/\s*;\s*base64\s*(?:;|$)/i,s="toDataURL",o=function(e){for(var i,_,n=e[_0xee65("0x7")],s=new t(n/4*3|0),o=0,r=0,a=[0,0],h=0,d=0;n--;)_=e[_0xee65("0x8")](o++),255!==(i=x[_-43])&&void 0!==i&&(a[1]=a[0],a[0]=_,d=d<<6|i,4===++h&&(s[r++]=d>>>16,61!==a[1]&&(s[r++]=d>>>8),61!==a[0]&&(s[r++]=d),h=0));return s};t&&(x=new t([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!i||_.toBlob&&_[_0xee65("0x9")]||(_[_0xee65("0xa")]||(_.toBlob=function(e,x){if(x||(x=_0xee65("0xb")),this[_0xee65("0xc")])return void e(this.mozGetAsFile(_0xee65("0xd"),x));if(this[_0xee65("0xe")]&&/^\s*image\/png\s*(?:$|;)/i.test(x))return void e(this[_0xee65("0xe")]());var i,_=Array[_0xee65("0x6")].slice.call(arguments,1),r=this[s][_0xee65("0xf")](this,_),a=r.indexOf(","),h=r[_0xee65("0x10")](a+1),d=n[_0xee65("0x11")](r[_0xee65("0x10")](0,a));Blob[_0xee65("0x12")]?(i=new Blob,i[_0xee65("0x13")]=_0xee65(d?"0x14":"0x15"),i[_0xee65("0x16")]=h,i[_0xee65("0x17")]=h.length):t&&(i=d?new Blob([o(h)],{type:x}):new Blob([decodeURIComponent(h)],{type:x})),e(i)}),!_[_0xee65("0x9")]&&_.toDataURLHD?_[_0xee65("0x9")]=function(){s=_0xee65("0x18");var e=this.toBlob();return s=_0xee65("0x19"),e}:_[_0xee65("0x9")]=_.toBlob)}(typeof self!==_0xee65("0x1a")&&self||typeof window!==_0xee65("0x1a")&&window||(void 0).content||void 0)},function(e,x,t){"use strict";var i,_=_||function(e){if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./[_0xee65("0x11")](navigator.userAgent))){var x=e[_0xee65("0x1b")],t=function(){return e.URL||e.webkitURL||e},i=x[_0xee65("0x1c")](_0xee65("0x1d"),"a"),_=_0xee65("0x1e")in i,n=function(e){var x=new MouseEvent(_0xee65("0x1f"));e[_0xee65("0x20")](x)},s=/constructor/i[_0xee65("0x11")](e[_0xee65("0x21")])||e[_0xee65("0x22")],o=/CriOS\/[\d]+/.test(navigator[_0xee65("0x23")]),r=function(x){(e[_0xee65("0x24")]||e[_0xee65("0x25")])(function(){throw x},0)},a=_0xee65("0x26"),h=function(e){var x=function(){typeof e===_0xee65("0x27")?t()[_0xee65("0x28")](e):e[_0xee65("0x29")]()};setTimeout(x,4e4)},d=function(e,x,t){x=[][_0xee65("0x2a")](x);for(var i=x.length;i--;){var _=e["on"+x[i]];if(typeof _===_0xee65("0x2b"))try{_.call(e,t||e)}catch(e){r(e)}}},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i[_0xee65("0x11")](e[_0xee65("0x2c")])?new Blob([String.fromCharCode(65279),e],{type:e[_0xee65("0x2c")]}):e},u=function(x,r,u){u||(x=c(x));var l,f=this,p=x[_0xee65("0x2c")],m=p===a,v=function(){d(f,_0xee65("0x2d")[_0xee65("0x2e")](" "))};if(f[_0xee65("0x37")]=f[_0xee65("0x38")],_)return l=t()[_0xee65("0x39")](x),void setTimeout(function(){i[_0xee65("0x36")]=l,i[_0xee65("0x1e")]=r,n(i),v(),h(l),f[_0xee65("0x37")]=f[_0xee65("0x3a")]});!function(){if((o||m&&s)&&e.FileReader){var i=new FileReader;return i[_0xee65("0x2f")]=function(){var x=o?i[_0xee65("0x30")]:i[_0xee65("0x30")][_0xee65("0x31")](/^data:[^;]*;/,_0xee65("0x32"));e[_0xee65("0x33")](x,_0xee65("0x34"))||(e[_0xee65("0x35")][_0xee65("0x36")]=x),x=void 0,f[_0xee65("0x37")]=f.DONE,v()},i.readAsDataURL(x),void(f[_0xee65("0x37")]=f[_0xee65("0x38")])}if(l||(l=t()[_0xee65("0x39")](x)),m)e[_0xee65("0x35")].href=l;else{e.open(l,_0xee65("0x34"))||(e[_0xee65("0x35")][_0xee65("0x36")]=l)}f[_0xee65("0x37")]=f.DONE,v(),h(l)}()},l=u[_0xee65("0x6")],f=function(e,x,t){return new u(e,x||e.name||"download",t)};return typeof navigator!==_0xee65("0x1a")&&navigator[_0xee65("0x3b")]?function(e,x,t){return x=x||e[_0xee65("0x3c")]||_0xee65("0x1e"),t||(e=c(e)),navigator[_0xee65("0x3b")](e,x)}:(l[_0xee65("0x3d")]=function(){},l[_0xee65("0x37")]=l[_0xee65("0x38")]=0,l[_0xee65("0x3e")]=1,l[_0xee65("0x3a")]=2,l.error=l[_0xee65("0x3f")]=l.onprogress=l[_0xee65("0x40")]=l[_0xee65("0x41")]=l[_0xee65("0x42")]=l.onwriteend=null,f)}}(typeof self!==_0xee65("0x1a")&&self||typeof window!==_0xee65("0x1a")&&window||(void 0)[_0xee65("0x43")]);typeof e!==_0xee65("0x1a")&&e[_0xee65("0x0")]?e.exports[_0xee65("0x44")]=_:_0xee65("0x2b")!==_0xee65("0x1a")&&null!==t(7)&&null!==t(8)&&void 0!==(i=function(){return _}[_0xee65("0x1")](x,t,x,e))&&(e[_0xee65("0x0")]=i)},function(e,x){e[_0xee65("0x0")]=function(){throw new Error(_0xee65("0x45"))}},function(e,x){(function(x){e[_0xee65("0x0")]=x})[_0xee65("0x1")](x,{})},function(e,x,t){"use strict";new Vue({el:_0xee65("0x46"),data:{show:1,hud:0,isTouch:![],noSupport:![],scaling:1,params:{weight:.75,decay:.9,density:.85,quality:3,samples:20,threshold:.28,invert:![],soft:.001}},mounted:function(){this[_0xee65("0x47")](this.run)},methods:{run:function(){this.show=0,this[_0xee65("0x48")]={audio:![],video:{mandatory:{minWidth:640,minHeight:480},optional:[{minFrameRate:35}]}},typeof navigator.mediaDevices!==_0xee65("0x1a")?navigator[_0xee65("0x49")][_0xee65("0x4a")]&&navigator[_0xee65("0x49")].getUserMedia(this.constraints)[_0xee65("0x4b")](this.done)[_0xee65("0x4c")](this[_0xee65("0x4d")]):this[_0xee65("0x4e")]=!![]},done:function(e){this[_0xee65("0x4f")]=e,SQR[_0xee65("0x50")][_0xee65("0x51")]([[_0xee65("0x52"),"thresold.glsl"],[_0xee65("0x53"),_0xee65("0x54")],_0xee65("0x55")],this[_0xee65("0x56")])},fail:function(){this.noSupport=!![]},sqr:function(e){this[_0xee65("0x57")]=1,this[_0xee65("0x58")]=0,this[_0xee65("0x59")]=e.webcam,this[_0xee65("0x59")][_0xee65("0x5a")]=!![],this[_0xee65("0x59")][_0xee65("0x5b")]=!![],this[_0xee65("0x59")][_0xee65("0x5c")](_0xee65("0x5d"),_0xee65("0x5d")),this[_0xee65("0x59")][_0xee65("0x5c")](_0xee65("0x5e"),_0xee65("0x5e")),this.renderer=SQR[_0xee65("0x5f")](_0xee65("0x60"),{antialias:!![]})[_0xee65("0x61")](0,0,0,1),this.rawFBO=SQR[_0xee65("0x62")](),this[_0xee65("0x63")]=SQR[_0xee65("0x62")](),this[_0xee65("0x64")]=SQR[_0xee65("0x62")](),this[_0xee65("0x65")]=SQR[_0xee65("0x66")][_0xee65("0x67")](e[_0xee65("0x54")]),this.thresold=SQR[_0xee65("0x66")][_0xee65("0x67")](e[_0xee65("0x68")]),this[_0xee65("0x69")]=SQR[_0xee65("0x6a")](),this.camera.position.z=2.5,this.root=SQR[_0xee65("0x6a")](),this[_0xee65("0x6b")][_0xee65("0x6c")](this[_0xee65("0x69")]),this[_0xee65("0x6d")]=SQR[_0xee65("0x6e")](this[_0xee65("0x59")],{isAnimated:!![],minFilter:this[_0xee65("0x6f")][_0xee65("0x70")].gl[_0xee65("0x71")],magFilter:this.renderer[_0xee65("0x70")].gl.LINEAR}),this.shader=SQR[_0xee65("0x72")](SQR[_0xee65("0x73")].texture)[_0xee65("0x74")]()[_0xee65("0x75")](_0xee65("0x76"),this[_0xee65("0x6d")]),this[_0xee65("0x77")]=SQR[_0xee65("0x6a")](),this[_0xee65("0x77")].buffer=SQR[_0xee65("0x66")][_0xee65("0x78")](4,4,8,8,0,0)[_0xee65("0x79")](),this[_0xee65("0x77")][_0xee65("0x7a")].x=Math.PI/2,this[_0xee65("0x77")][_0xee65("0x7b")]=this[_0xee65("0x7b")],this[_0xee65("0x6b")][_0xee65("0x6c")](this[_0xee65("0x77")]),this[_0xee65("0x7c")]=_0xee65("0x7d")in document,this[_0xee65("0x7e")]=this[_0xee65("0x7c")]?"touchmove":_0xee65("0x7e"),window[_0xee65("0x7f")](_0xee65("0x80"),this[_0xee65("0x80")]),this.tx=0,this.ty=0,this.mx=0,this.my=0,this.gui=new(dat[_0xee65("0x81")]);var x=this[_0xee65("0x82")][_0xee65("0x83")](_0xee65("0x84"));x[_0xee65("0x6c")](this.params,_0xee65("0x85"),.1,1),x.add(this.params,"decay",.6,1),x.add(this[_0xee65("0x86")],"density",.1,1),x[_0xee65("0x33")](),x=this[_0xee65("0x82")][_0xee65("0x83")](_0xee65("0x87")),x.add(this[_0xee65("0x86")],_0xee65("0x88")),x[_0xee65("0x6c")](this[_0xee65("0x86")],_0xee65("0x89"),.02,1),x.open(),this[_0xee65("0x82")][_0xee65("0x6c")](this.params,_0xee65("0x8a"),1,3.5)[_0xee65("0x8b")](.25)[_0xee65("0x8c")](this[_0xee65("0x8d")]),this.lastFrameTimeMs=Date.now(),this[_0xee65("0x8e")](),this[_0xee65("0x80")]()},save_screenshot:function(){this[_0xee65("0x8e")]();var e=this[_0xee65("0x6f")].context.gl[_0xee65("0xd")],x=e[_0xee65("0x19")](_0xee65("0x8f"));if(navigator[_0xee65("0x23")][_0xee65("0x90")]()[_0xee65("0x91")](_0xee65("0x92"))>-1){var t=new Date,i=t.getFullYear()+"-"+t.getMonth()+"-"+t[_0xee65("0x93")]()+"_"+t[_0xee65("0x94")]()+"."+t[_0xee65("0x95")]()+"."+t[_0xee65("0x96")](),_=document[_0xee65("0x97")]("a");_[_0xee65("0x36")]=x,_.download="pitchblack_"+i+_0xee65("0x98"),_.click()}else window[_0xee65("0x33")](x)},set_quality:function(e){this[_0xee65("0x99")]=4-e,this.resize()},draw:function(){this[_0xee65("0x59")]&&this[_0xee65("0x59")][_0xee65("0x37")]===this.video.HAVE_ENOUGH_DATA&&(this.texture[_0xee65("0x79")](),this.rawFBO[_0xee65("0x9a")](),this[_0xee65("0x6f")][_0xee65("0x8e")](this.root,this.camera),this[_0xee65("0x64")][_0xee65("0x9a")](),this.thresold[_0xee65("0x7b")][_0xee65("0x74")](),this[_0xee65("0x9b")][_0xee65("0x7b")][_0xee65("0x75")](_0xee65("0x9c"),this[_0xee65("0x86")][_0xee65("0x89")]),this[_0xee65("0x9b")][_0xee65("0x7b")][_0xee65("0x75")](_0xee65("0x9d"),this.params.soft),this.thresold.shader[_0xee65("0x75")]("INVERT",this[_0xee65("0x86")][_0xee65("0x88")]),this[_0xee65("0x9b")][_0xee65("0x7b")][_0xee65("0x75")]("uTexture",this.rawFBO.texture),this[_0xee65("0x6f")].render(this.thresold),this[_0xee65("0x6f")][_0xee65("0x9e")](),this.renderer[_0xee65("0x70")].gl[_0xee65("0x9f")](0,0,this.renderer[_0xee65("0x70")].canvas[_0xee65("0xa0")],this.renderer[_0xee65("0x70")][_0xee65("0xd")][_0xee65("0xa1")]),this[_0xee65("0x65")].shader[_0xee65("0x74")](),this.post[_0xee65("0x7b")][_0xee65("0x75")](_0xee65("0xa2"),this[_0xee65("0x86")][_0xee65("0x85")]),this[_0xee65("0x65")].shader[_0xee65("0x75")](_0xee65("0xa3"),this[_0xee65("0x86")][_0xee65("0xa4")]),this.post.shader[_0xee65("0x75")]("DENSITY",this[_0xee65("0x86")].density),this[_0xee65("0x65")].shader[_0xee65("0x75")](_0xee65("0x76"),this[_0xee65("0x64")][_0xee65("0x6d")]),this[_0xee65("0x6f")][_0xee65("0x8e")](this[_0xee65("0x65")]))},render:function(e){if(e<this[_0xee65("0xa5")]+20)return void requestAnimationFrame(this[_0xee65("0x8e")]);this[_0xee65("0xa5")]=e,this[_0xee65("0xa6")](),requestAnimationFrame(this.render)},resize:function(e){if(this.video){var x=window[_0xee65("0xa7")],t=window[_0xee65("0xa8")],i=this[_0xee65("0x59")][_0xee65("0xa9")]/this.video.videoHeight;console[_0xee65("0xaa")](i),t=this[_0xee65("0x59")][_0xee65("0xab")],x=t*i,this[_0xee65("0xac")][_0xee65("0x80")](x/this.scaling,t/this[_0xee65("0x99")]),this[_0xee65("0x63")][_0xee65("0x80")](x/this[_0xee65("0x99")],t/this[_0xee65("0x99")]),this.thresoldFBO[_0xee65("0x80")](x/this[_0xee65("0x99")],t/this[_0xee65("0x99")]),this[_0xee65("0x6f")].context[_0xee65("0x17")](x/this[_0xee65("0x99")],t/this.scaling,window[_0xee65("0xad")]),this[_0xee65("0x69")][_0xee65("0xae")]=(new(SQR[_0xee65("0xaf")])).perspective(70,i,1,1e3)}}}})}]);