{"version":3,"sources":["webpack:///bundle.app.js","webpack:///webpack/bootstrap 83dcb80a7026f591db65","webpack:///./src/app.js","webpack:///./src/lib/canvas-toBlob.js","webpack:///./src/lib/FileSaver.min.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/app/app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","view","base64_ranks","Uint8Array","HTMLCanvasElement","canvas_proto","is_base64_regex","to_data_url","decode_base64","base64","rank","code","len","length","buffer","outptr","last","state","save","charCodeAt","undef","toBlob","toBlobHD","callback","type","this","mozGetAsFile","msToBlob","test","blob","args","Array","slice","arguments","dataURI","apply","header_end","indexOf","data","substring","is_base64","Blob","fake","encoding","size","decodeURIComponent","toDataURLHD","self","window","undefined","content","__WEBPACK_AMD_DEFINE_RESULT__","saveAs","e","navigator","userAgent","t","document","URL","webkitURL","r","createElementNS","a","MouseEvent","dispatchEvent","HTMLElement","safari","f","u","setImmediate","setTimeout","revokeObjectURL","remove","concat","String","fromCharCode","v","y","w","h","split","readyState","INIT","createObjectURL","href","download","DONE","FileReader","onloadend","result","replace","open","location","readAsDataURL","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","Error","__webpack_amd_options__","_defineProperty","obj","key","value","writable","_methods","Vue","el","show","hud","isTouch","noSupport","scaling","params","weight","decay","density","quality","samples","threshold","invert","soft","mounted","$nextTick","run","methods","constraints","audio","video","mandatory","minWidth","minHeight","optional","minFrameRate","maxWidth","maxHeigth","mediaDevices","getUserMedia","then","done","catch","fail","save_screenshot","console","log","renderer","context","gl","canvas","stream","SQR","Loader","loadAssets","sqr","assets","webcam","loop","muted","setAttribute","Renderer","antialias","clearColor","rawFBO","FrameBuffer","postFBO","thresoldFBO","post","Primitives","createPostEffect","thresold","camera","Transform","position","z","root","add","texture","Texture","isAnimated","minFilter","LINEAR","magFilter","shader","Shader","GLSL","use","setUniform","plane","createPlane","update","rotation","x","Math","PI","mousemove","addEventListener","resize","tx","ty","mx","my","gui","dat","GUI","addFolder","step","onChange","set_quality","lastFrameTimeMs","Date","now","render","dataURL","toDataURL","toLowerCase","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","createElement","click","HAVE_ENOUGH_DATA","bind","renderToScreen","viewport","width","height","timestamp","requestAnimationFrame","draw","innerWidth","innerHeight","naturalAspectRatio","videoWidth","videoHeight","devicePixelRatio","projection","ProjectionMatrix","perspective"],"mappings":"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","file":"bundle.app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(2);\n__webpack_require__(3);\n__webpack_require__(4);\n\n__webpack_require__(5);\n__webpack_require__(6);\n__webpack_require__(9);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2016-05-26\n * \n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: MIT\n *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function (view) {\n\t\"use strict\";\n\n\tvar Uint8Array = view.Uint8Array,\n\t    HTMLCanvasElement = view.HTMLCanvasElement,\n\t    canvas_proto = HTMLCanvasElement && HTMLCanvasElement.prototype,\n\t    is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i,\n\t    to_data_url = \"toDataURL\",\n\t    base64_ranks,\n\t    decode_base64 = function decode_base64(base64) {\n\t\tvar len = base64.length,\n\t\t    buffer = new Uint8Array(len / 4 * 3 | 0),\n\t\t    i = 0,\n\t\t    outptr = 0,\n\t\t    last = [0, 0],\n\t\t    state = 0,\n\t\t    save = 0,\n\t\t    rank,\n\t\t    code,\n\t\t    undef;\n\t\twhile (len--) {\n\t\t\tcode = base64.charCodeAt(i++);\n\t\t\trank = base64_ranks[code - 43];\n\t\t\tif (rank !== 255 && rank !== undef) {\n\t\t\t\tlast[1] = last[0];\n\t\t\t\tlast[0] = code;\n\t\t\t\tsave = save << 6 | rank;\n\t\t\t\tstate++;\n\t\t\t\tif (state === 4) {\n\t\t\t\t\tbuffer[outptr++] = save >>> 16;\n\t\t\t\t\tif (last[1] !== 61 /* padding character */) {\n\t\t\t\t\t\t\tbuffer[outptr++] = save >>> 8;\n\t\t\t\t\t\t}\n\t\t\t\t\tif (last[0] !== 61 /* padding character */) {\n\t\t\t\t\t\t\tbuffer[outptr++] = save;\n\t\t\t\t\t\t}\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 2/3 chance there's going to be some null bytes at the end, but that\n\t\t// doesn't really matter with most image formats.\n\t\t// If it somehow matters for you, truncate the buffer up outptr.\n\t\treturn buffer;\n\t};\n\tif (Uint8Array) {\n\t\tbase64_ranks = new Uint8Array([62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 0, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]);\n\t}\n\tif (HTMLCanvasElement && (!canvas_proto.toBlob || !canvas_proto.toBlobHD)) {\n\t\tif (!canvas_proto.toBlob) canvas_proto.toBlob = function (callback, type /*, ...args*/) {\n\t\t\tif (!type) {\n\t\t\t\ttype = \"image/png\";\n\t\t\t}if (this.mozGetAsFile) {\n\t\t\t\tcallback(this.mozGetAsFile(\"canvas\", type));\n\t\t\t\treturn;\n\t\t\t}if (this.msToBlob && /^\\s*image\\/png\\s*(?:$|;)/i.test(type)) {\n\t\t\t\tcallback(this.msToBlob());\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1),\n\t\t\t    dataURI = this[to_data_url].apply(this, args),\n\t\t\t    header_end = dataURI.indexOf(\",\"),\n\t\t\t    data = dataURI.substring(header_end + 1),\n\t\t\t    is_base64 = is_base64_regex.test(dataURI.substring(0, header_end)),\n\t\t\t    blob;\n\t\t\tif (Blob.fake) {\n\t\t\t\t// no reason to decode a data: URI that's just going to become a data URI again\n\t\t\t\tblob = new Blob();\n\t\t\t\tif (is_base64) {\n\t\t\t\t\tblob.encoding = \"base64\";\n\t\t\t\t} else {\n\t\t\t\t\tblob.encoding = \"URI\";\n\t\t\t\t}\n\t\t\t\tblob.data = data;\n\t\t\t\tblob.size = data.length;\n\t\t\t} else if (Uint8Array) {\n\t\t\t\tif (is_base64) {\n\t\t\t\t\tblob = new Blob([decode_base64(data)], { type: type });\n\t\t\t\t} else {\n\t\t\t\t\tblob = new Blob([decodeURIComponent(data)], { type: type });\n\t\t\t\t}\n\t\t\t}\n\t\t\tcallback(blob);\n\t\t};\n\n\t\tif (!canvas_proto.toBlobHD && canvas_proto.toDataURLHD) {\n\t\t\tcanvas_proto.toBlobHD = function () {\n\t\t\t\tto_data_url = \"toDataURLHD\";\n\t\t\t\tvar blob = this.toBlob();\n\t\t\t\tto_data_url = \"toDataURL\";\n\t\t\t\treturn blob;\n\t\t\t};\n\t\t} else {\n\t\t\tcanvas_proto.toBlobHD = canvas_proto.toBlob;\n\t\t}\n\t}\n})(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || undefined.content || undefined);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_RESULT__;\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\nvar saveAs = saveAs || function (e) {\n  \"use strict\";\n  if (typeof e === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n    return;\n  }var t = e.document,\n      n = function n() {\n    return e.URL || e.webkitURL || e;\n  },\n      r = t.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\"),\n      o = \"download\" in r,\n      a = function a(e) {\n    var t = new MouseEvent(\"click\");e.dispatchEvent(t);\n  },\n      i = /constructor/i.test(e.HTMLElement) || e.safari,\n      f = /CriOS\\/[\\d]+/.test(navigator.userAgent),\n      u = function u(t) {\n    (e.setImmediate || e.setTimeout)(function () {\n      throw t;\n    }, 0);\n  },\n      s = \"application/octet-stream\",\n      d = 1e3 * 40,\n      c = function c(e) {\n    var t = function t() {\n      if (typeof e === \"string\") {\n        n().revokeObjectURL(e);\n      } else {\n        e.remove();\n      }\n    };setTimeout(t, d);\n  },\n      l = function l(e, t, n) {\n    t = [].concat(t);var r = t.length;while (r--) {\n      var o = e[\"on\" + t[r]];if (typeof o === \"function\") {\n        try {\n          o.call(e, n || e);\n        } catch (a) {\n          u(a);\n        }\n      }\n    }\n  },\n      p = function p(e) {\n    if (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type)) {\n      return new Blob([String.fromCharCode(65279), e], { type: e.type });\n    }return e;\n  },\n      v = function v(t, u, d) {\n    if (!d) {\n      t = p(t);\n    }var v = this,\n        w = t.type,\n        m = w === s,\n        y,\n        h = function h() {\n      l(v, \"writestart progress write writeend\".split(\" \"));\n    },\n        S = function S() {\n      if ((f || m && i) && e.FileReader) {\n        var r = new FileReader();r.onloadend = function () {\n          var t = f ? r.result : r.result.replace(/^data:[^;]*;/, \"data:attachment/file;\");var n = e.open(t, \"_blank\");if (!n) e.location.href = t;t = undefined;v.readyState = v.DONE;h();\n        };r.readAsDataURL(t);v.readyState = v.INIT;return;\n      }if (!y) {\n        y = n().createObjectURL(t);\n      }if (m) {\n        e.location.href = y;\n      } else {\n        var o = e.open(y, \"_blank\");if (!o) {\n          e.location.href = y;\n        }\n      }v.readyState = v.DONE;h();c(y);\n    };v.readyState = v.INIT;if (o) {\n      y = n().createObjectURL(t);setTimeout(function () {\n        r.href = y;r.download = u;a(r);h();c(y);v.readyState = v.DONE;\n      });return;\n    }S();\n  },\n      w = v.prototype,\n      m = function m(e, t, n) {\n    return new v(e, t || e.name || \"download\", n);\n  };if (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n    return function (e, t, n) {\n      t = t || e.name || \"download\";if (!n) {\n        e = p(e);\n      }return navigator.msSaveOrOpenBlob(e, t);\n    };\n  }w.abort = function () {};w.readyState = w.INIT = 0;w.WRITING = 1;w.DONE = 2;w.error = w.onwritestart = w.onprogress = w.onwrite = w.onabort = w.onerror = w.onwriteend = null;return m;\n}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || undefined.content);if (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if (\"function\" !== \"undefined\" && __webpack_require__(7) !== null && __webpack_require__(8) !== null) {\n  !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n    return saveAs;\n  }.call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nmodule.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _methods;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// start app\n\nvar app = new Vue({\n\n  el: '#ui',\n\n  data: {\n    show: 1,\n    hud: 0,\n    isTouch: false,\n    noSupport: false,\n    scaling: 1,\n    params: {\n      weight: 0.75,\n      decay: 0.90,\n      density: 0.85,\n      quality: 3,\n      samples: 20,\n      threshold: 0.28,\n      invert: false,\n      soft: 0.001\n    }\n  },\n\n  mounted: function mounted() {\n    this.$nextTick(this.run);\n  },\n\n\n  methods: (_methods = {\n    run: function run() {\n\n      this.show = 0;\n      this.constraints = {\n        audio: false,\n        video: {\n          mandatory: { minWidth: 640, minHeight: 480 },\n          optional: [{ minFrameRate: 35 }, { maxWidth: 640 }, { maxHeigth: 480 }]\n        }\n      };\n\n      if (typeof navigator.mediaDevices !== \"undefined\") {\n        if (!!navigator.mediaDevices.getUserMedia) {\n          navigator.mediaDevices.getUserMedia(this.constraints).then(this.done).catch(this.fail);\n        }\n      } else {\n        this.noSupport = true;\n      }\n    },\n    save_screenshot: function save_screenshot() {\n      console.log(this.renderer.context.gl.canvas);\n    },\n    done: function done(stream) {\n\n      this.stream = stream;\n\n      SQR.Loader.loadAssets([['glsl/thresold.glsl', 'thresold.glsl'], ['glsl/godray.glsl', 'post.glsl'], 'webcam'], this.sqr);\n    },\n    fail: function fail() {\n      this.noSupport = true;\n    },\n    sqr: function sqr(assets) {\n\n      this.hud = 1;\n      this.show = 0;\n\n      this.video = assets.webcam;\n      this.video.loop = true;\n      this.video.muted = true;\n      this.video.setAttribute('webkit-playsinline', 'webkit-playsinline');\n      this.video.setAttribute('playsinline', 'playsinline');\n\n      this.params[\"save\"] = this.save_screenshot;\n\n      //console.log(this.video, this.video instanceof HTMLVideoElement, this);\n\n      // this.stats = new Stats();\n      // this.stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n      // document.body.appendChild(this.stats.domElement);\n\n      this.renderer = SQR.Renderer('#gl', { antialias: true }).clearColor(0.0, 0.0, 0.0, 1);\n\n      this.rawFBO = SQR.FrameBuffer();\n      this.postFBO = SQR.FrameBuffer();\n      this.thresoldFBO = SQR.FrameBuffer();\n\n      this.post = SQR.Primitives.createPostEffect(assets['post.glsl']);\n      this.thresold = SQR.Primitives.createPostEffect(assets['thresold.glsl']);\n\n      this.camera = SQR.Transform();\n      this.camera.position.z = 2.5;\n\n      //root\n      this.root = SQR.Transform();\n      this.root.add(this.camera);\n\n      this.texture = SQR.Texture(this.video, {\n        isAnimated: true,\n        minFilter: this.renderer.context.gl.LINEAR,\n        magFilter: this.renderer.context.gl.LINEAR\n      });\n\n      this.shader = SQR.Shader(SQR.GLSL.texture).use().setUniform('uTexture', this.texture);\n\n      this.plane = SQR.Transform();\n      this.plane.buffer = SQR.Primitives.createPlane(4, 4, 8, 8, 0, 0).update();\n      this.plane.rotation.x = Math.PI / 2;\n      this.plane.shader = this.shader;\n\n      this.root.add(this.plane);\n\n      this.isTouch = 'ontouchstart' in document;\n      this.mousemove = this.isTouch ? 'touchmove' : 'mousemove';\n      window.addEventListener('resize', this.resize);\n\n      this.tx = 0;\n      this.ty = 0;\n      this.mx = 0;\n      this.my = 0;\n\n      this.gui = new dat.GUI();\n\n      var f = this.gui.addFolder('rays');\n\n      f.add(this.params, 'weight', 0.1, 1.0);\n      f.add(this.params, 'decay', 0.6, 1.0);\n      f.add(this.params, 'density', 0.1, 1.0);\n      f.open();\n\n      //f.add(this.params, 'samples', 10.0, 25.0).step(1.0)\n      //f.add(this.params, 'quality', 1, 4).step(1.0).onFinishChange( this.set_quality );\n\n      f = this.gui.addFolder('black & white');\n      f.add(this.params, 'invert');\n      f.add(this.params, 'threshold', 0.02, 1.0);\n      f.open();\n\n      this.gui.add(this.params, 'quality', 1.0, 3.5).step(0.25).onChange(this.set_quality);\n      this.gui.add(this.params, 'save').name('take screenshot!');\n\n      // this.gui.add(this.params, 'quality', {\n      //   High: 1,\n      //   Mid: 2,\n      //   Low: 3\n      // }).onChange(this.set_quality);\n\n      //document.querySelector(\".gl\").addEventListener('contextmenu', this.save_screenshot);\n\n      //console.log( this.renderer.context.gl.canvas );\n\n      // var button = document.getElementById('btn-save');\n      // button.addEventListener('click', this.save_screenshot);\n\n\n      this.lastFrameTimeMs = Date.now();\n\n      this.render();\n      this.resize();\n    }\n  }, _defineProperty(_methods, 'save_screenshot', function save_screenshot() {\n\n    this.render();\n    var canvas = this.renderer.context.gl.canvas;\n    var dataURL = canvas.toDataURL(\"image/jpeg\");\n    if (navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n      var t = new Date(),\n          o = t.getFullYear() + \"-\" + t.getMonth() + \"-\" + t.getDate() + \"_\" + t.getHours() + \".\" + t.getMinutes() + \".\" + t.getSeconds(),\n          a = document.createElement(\"a\");\n      a.href = dataURL, a.download = \"pitchblack_\" + o + \".jpg\", a.click();\n    } else {\n      window.open(dataURL);\n    }\n  }), _defineProperty(_methods, 'set_quality', function set_quality(value) {\n    this.scaling = 4 - value;\n    this.resize();\n  }), _defineProperty(_methods, 'draw', function draw() {\n\n    if (!this.video) {\n      return;\n    }\n\n    if (this.video.readyState !== this.video.HAVE_ENOUGH_DATA) {\n      return;\n    }\n\n    this.texture.update();\n\n    this.rawFBO.bind();\n    this.renderer.render(this.root, this.camera);\n\n    this.thresoldFBO.bind();\n    this.thresold.shader.use();\n    this.thresold.shader.setUniform('THRESHOLD', this.params[\"threshold\"]);\n    this.thresold.shader.setUniform('SOFT', this.params[\"soft\"]);\n    this.thresold.shader.setUniform('INVERT', this.params[\"invert\"]);\n    this.thresold.shader.setUniform('uTexture', this.rawFBO.texture);\n    this.renderer.render(this.thresold);\n\n    this.renderer.renderToScreen();\n    this.renderer.context.gl.viewport(0, 0, this.renderer.context.canvas.width, this.renderer.context.canvas.height);\n\n    this.post.shader.use();\n    this.post.shader.setUniform('WEIGHT', this.params[\"weight\"]);\n    this.post.shader.setUniform('DECAY_FACTOR', this.params[\"decay\"]);\n    //this.post.shader.setUniform('NUM_SAMPLES', this.params[\"samples\"]);\n    this.post.shader.setUniform('DENSITY', this.params[\"density\"]);\n    this.post.shader.setUniform('uTexture', this.thresoldFBO.texture);\n    this.renderer.render(this.post);\n  }), _defineProperty(_methods, 'render', function render(timestamp) {\n\n    // Throttle the frame rate.\n    if (timestamp < this.lastFrameTimeMs + 1000 / 50) {\n      requestAnimationFrame(this.render);\n      return;\n    }\n    this.lastFrameTimeMs = timestamp;\n\n    this.draw();\n\n    requestAnimationFrame(this.render);\n  }), _defineProperty(_methods, 'resize', function resize(e) {\n\n    if (!this.video) return;\n\n    var w = window.innerWidth,\n        h = window.innerHeight,\n        naturalAspectRatio = this.video.videoWidth / this.video.videoHeight;\n\n    console.log(naturalAspectRatio);\n\n    // w = w > wCam ? wCam : w;\n    h = this.video.videoHeight;\n    w = h * naturalAspectRatio;\n\n    //var aspect = w / h;\n    // console.log(this.scaling, \":\",w / this.scaling, h / this.scaling);\n\n    this.rawFBO.resize(w / this.scaling, h / this.scaling);\n    this.postFBO.resize(w / this.scaling, h / this.scaling);\n    this.thresoldFBO.resize(w / this.scaling, h / this.scaling);\n\n    this.renderer.context.size(w / this.scaling, h / this.scaling, window.devicePixelRatio);\n    this.camera.projection = new SQR.ProjectionMatrix().perspective(70, naturalAspectRatio, 1, 1000);\n  }), _methods)\n});\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 83dcb80a7026f591db65","require(\"./css/dg.scss\");\nrequire(\"./css/transitions.scss\");\nrequire(\"./css/style.scss\");\n\nrequire(\"./lib/canvas-toBlob.js\");\nrequire(\"./lib/FileSaver.min.js\");\nrequire(\"./app/app.js\");\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js","/* canvas-toBlob.js\n * A canvas.toBlob() implementation.\n * 2016-05-26\n * \n * By Eli Grey, http://eligrey.com and Devin Samarin, https://github.com/eboyjr\n * License: MIT\n *   See https://github.com/eligrey/canvas-toBlob.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,\n  plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */\n\n(function(view) {\n\"use strict\";\nvar\n\t  Uint8Array = view.Uint8Array\n\t, HTMLCanvasElement = view.HTMLCanvasElement\n\t, canvas_proto = HTMLCanvasElement && HTMLCanvasElement.prototype\n\t, is_base64_regex = /\\s*;\\s*base64\\s*(?:;|$)/i\n\t, to_data_url = \"toDataURL\"\n\t, base64_ranks\n\t, decode_base64 = function(base64) {\n\t\tvar\n\t\t\t  len = base64.length\n\t\t\t, buffer = new Uint8Array(len / 4 * 3 | 0)\n\t\t\t, i = 0\n\t\t\t, outptr = 0\n\t\t\t, last = [0, 0]\n\t\t\t, state = 0\n\t\t\t, save = 0\n\t\t\t, rank\n\t\t\t, code\n\t\t\t, undef\n\t\t;\n\t\twhile (len--) {\n\t\t\tcode = base64.charCodeAt(i++);\n\t\t\trank = base64_ranks[code-43];\n\t\t\tif (rank !== 255 && rank !== undef) {\n\t\t\t\tlast[1] = last[0];\n\t\t\t\tlast[0] = code;\n\t\t\t\tsave = (save << 6) | rank;\n\t\t\t\tstate++;\n\t\t\t\tif (state === 4) {\n\t\t\t\t\tbuffer[outptr++] = save >>> 16;\n\t\t\t\t\tif (last[1] !== 61 /* padding character */) {\n\t\t\t\t\t\tbuffer[outptr++] = save >>> 8;\n\t\t\t\t\t}\n\t\t\t\t\tif (last[0] !== 61 /* padding character */) {\n\t\t\t\t\t\tbuffer[outptr++] = save;\n\t\t\t\t\t}\n\t\t\t\t\tstate = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 2/3 chance there's going to be some null bytes at the end, but that\n\t\t// doesn't really matter with most image formats.\n\t\t// If it somehow matters for you, truncate the buffer up outptr.\n\t\treturn buffer;\n\t}\n;\nif (Uint8Array) {\n\tbase64_ranks = new Uint8Array([\n\t\t  62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1\n\t\t, -1, -1,  0, -1, -1, -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9\n\t\t, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25\n\t\t, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35\n\t\t, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n\t]);\n}\nif (HTMLCanvasElement && (!canvas_proto.toBlob || !canvas_proto.toBlobHD)) {\n\tif (!canvas_proto.toBlob)\n\tcanvas_proto.toBlob = function(callback, type /*, ...args*/) {\n\t\t  if (!type) {\n\t\t\ttype = \"image/png\";\n\t\t} if (this.mozGetAsFile) {\n\t\t\tcallback(this.mozGetAsFile(\"canvas\", type));\n\t\t\treturn;\n\t\t} if (this.msToBlob && /^\\s*image\\/png\\s*(?:$|;)/i.test(type)) {\n\t\t\tcallback(this.msToBlob());\n\t\t\treturn;\n\t\t}\n\n\t\tvar\n\t\t\t  args = Array.prototype.slice.call(arguments, 1)\n\t\t\t, dataURI = this[to_data_url].apply(this, args)\n\t\t\t, header_end = dataURI.indexOf(\",\")\n\t\t\t, data = dataURI.substring(header_end + 1)\n\t\t\t, is_base64 = is_base64_regex.test(dataURI.substring(0, header_end))\n\t\t\t, blob\n\t\t;\n\t\tif (Blob.fake) {\n\t\t\t// no reason to decode a data: URI that's just going to become a data URI again\n\t\t\tblob = new Blob\n\t\t\tif (is_base64) {\n\t\t\t\tblob.encoding = \"base64\";\n\t\t\t} else {\n\t\t\t\tblob.encoding = \"URI\";\n\t\t\t}\n\t\t\tblob.data = data;\n\t\t\tblob.size = data.length;\n\t\t} else if (Uint8Array) {\n\t\t\tif (is_base64) {\n\t\t\t\tblob = new Blob([decode_base64(data)], {type: type});\n\t\t\t} else {\n\t\t\t\tblob = new Blob([decodeURIComponent(data)], {type: type});\n\t\t\t}\n\t\t}\n\t\tcallback(blob);\n\t};\n\n\tif (!canvas_proto.toBlobHD && canvas_proto.toDataURLHD) {\n\t\tcanvas_proto.toBlobHD = function() {\n\t\t\tto_data_url = \"toDataURLHD\";\n\t\t\tvar blob = this.toBlob();\n\t\t\tto_data_url = \"toDataURL\";\n\t\t\treturn blob;\n\t\t}\n\t} else {\n\t\tcanvas_proto.toBlobHD = canvas_proto.toBlob;\n\t}\n}\n}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this.content || this));\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/canvas-toBlob.js","/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\nvar saveAs=saveAs||function(e){\"use strict\";if(typeof e===\"undefined\"||typeof navigator!==\"undefined\"&&/MSIE [1-9]\\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS(\"http://www.w3.org/1999/xhtml\",\"a\"),o=\"download\"in r,a=function(e){var t=new MouseEvent(\"click\");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\\/[\\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s=\"application/octet-stream\",d=1e3*40,c=function(e){var t=function(){if(typeof e===\"string\"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e[\"on\"+t[r]];if(typeof o===\"function\"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,\"writestart progress write writeend\".split(\" \"))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,\"data:attachment/file;\");var n=e.open(t,\"_blank\");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,\"_blank\");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||\"download\",n)};if(typeof navigator!==\"undefined\"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||\"download\";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!==\"undefined\"&&self||typeof window!==\"undefined\"&&window||this.content);if(typeof module!==\"undefined\"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!==\"undefined\"&&define!==null&&define.amd!==null){define(\"FileSaver.js\",function(){return saveAs})}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/FileSaver.min.js","module.exports = function() {\r\n\tthrow new Error(\"define cannot be used indirect\");\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-define.js\n// module id = 7\n// module chunks = 0","/* globals __webpack_amd_options__ */\r\nmodule.exports = __webpack_amd_options__;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 8\n// module chunks = 0","// start app\n\nconst app = new Vue({\n\n  el: '#ui',\n\n  data: {\n    show: 1,\n    hud: 0,\n    isTouch: false,\n    noSupport: false,\n    scaling: 1,\n    params: {\n      weight: 0.75,\n      decay: 0.90,\n      density: 0.85,\n      quality: 3,\n      samples: 20,\n      threshold: 0.28,\n      invert: false,\n      soft: 0.001\n    }\n  },\n\n  mounted() {\n    this.$nextTick(this.run);\n  },\n\n  methods: {\n\n    run() {\n\n      this.show = 0;\n      this.constraints = {\n        audio: false,\n        video: {\n          mandatory: { minWidth: 640, minHeight: 480 },\n          optional: [\n            { minFrameRate: 35 },\n            { maxWidth: 640 },\n            { maxHeigth: 480 }\n          ]\n        }\n      }\n\n      if (typeof navigator.mediaDevices !== \"undefined\"){\n        if (!!navigator.mediaDevices.getUserMedia) {\n          navigator.mediaDevices.getUserMedia(this.constraints)\n            .then(this.done)\n            .catch(this.fail);\n        }\n      }\n      else {\n        this.noSupport = true;\n      }\n\n    },\n\n    save_screenshot(){\n      console.log( this.renderer.context.gl.canvas );\n    },\n\n    done(stream) {\n\n      this.stream = stream;\n\n      SQR.Loader.loadAssets([\n        ['glsl/thresold.glsl', 'thresold.glsl'],\n        ['glsl/godray.glsl', 'post.glsl'],\n        'webcam'\n        ], this.sqr);\n    },\n\n    fail() {\n      this.noSupport = true;\n    },\n\n    sqr(assets) {\n\n      this.hud = 1;\n      this.show = 0;\n\n      this.video = assets.webcam;\n      this.video.loop = true;\n\t\t\tthis.video.muted = true;\n\t\t\tthis.video.setAttribute( 'webkit-playsinline', 'webkit-playsinline' );\n\t\t\tthis.video.setAttribute( 'playsinline', 'playsinline' );\n\n      this.params[\"save\"] = this.save_screenshot;\n\n      //console.log(this.video, this.video instanceof HTMLVideoElement, this);\n\n      // this.stats = new Stats();\n      // this.stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\n      // document.body.appendChild(this.stats.domElement);\n\n      this.renderer = SQR.Renderer('#gl', { antialias: true }).clearColor(0.0, 0.0, 0.0, 1);\n\n      this.rawFBO = SQR.FrameBuffer();\n      this.postFBO = SQR.FrameBuffer();\n      this.thresoldFBO = SQR.FrameBuffer();\n\n      this.post = SQR.Primitives.createPostEffect(assets['post.glsl']);\n      this.thresold = SQR.Primitives.createPostEffect(assets['thresold.glsl']);\n\n      this.camera = SQR.Transform();\n      this.camera.position.z = 2.5;\n\n      //root\n      this.root = SQR.Transform();\n      this.root.add(this.camera);\n\n      this.texture = SQR.Texture(this.video, {\n        isAnimated: true,\n        minFilter: this.renderer.context.gl.LINEAR,\n        magFilter: this.renderer.context.gl.LINEAR\n      });\n\n      this.shader = SQR.Shader(SQR.GLSL.texture).use().setUniform('uTexture', this.texture);\n\n      this.plane = SQR.Transform();\n      this.plane.buffer = SQR.Primitives.createPlane(4, 4, 8, 8, 0, 0).update();\n      this.plane.rotation.x = Math.PI / 2;\n      this.plane.shader = this.shader;\n\n      this.root.add(this.plane);\n\n      this.isTouch = 'ontouchstart' in document;\n      this.mousemove = this.isTouch ? 'touchmove' : 'mousemove';\n      window.addEventListener('resize', this.resize);\n\n      this.tx = 0;\n      this.ty = 0;\n      this.mx = 0;\n      this.my = 0;\n\n      this.gui = new dat.GUI();\n\n      var f = this.gui.addFolder('rays');\n\n      f.add(this.params, 'weight', 0.1, 1.0);\n      f.add(this.params, 'decay', 0.6, 1.0);\n      f.add(this.params, 'density', 0.1, 1.0);\n      f.open();\n\n      //f.add(this.params, 'samples', 10.0, 25.0).step(1.0)\n      //f.add(this.params, 'quality', 1, 4).step(1.0).onFinishChange( this.set_quality );\n\n      f = this.gui.addFolder('black & white');\n      f.add(this.params, 'invert');\n      f.add(this.params, 'threshold', 0.02, 1.0);\n      f.open();\n\n      this.gui.add(this.params, 'quality', 1.0, 3.5).step(0.25).onChange(this.set_quality);\n      this.gui.add(this.params, 'save').name('take screenshot!')\n\n      // this.gui.add(this.params, 'quality', {\n      //   High: 1,\n      //   Mid: 2,\n      //   Low: 3\n      // }).onChange(this.set_quality);\n\n      //document.querySelector(\".gl\").addEventListener('contextmenu', this.save_screenshot);\n\n      //console.log( this.renderer.context.gl.canvas );\n\n      // var button = document.getElementById('btn-save');\n      // button.addEventListener('click', this.save_screenshot);\n\n\n      this.lastFrameTimeMs = Date.now();\n\n      this.render();\n      this.resize();\n\n    },\n\n    save_screenshot(){\n\n      this.render();\n      var canvas = this.renderer.context.gl.canvas;\n      var dataURL = canvas.toDataURL(\"image/jpeg\");\n      if (navigator.userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n          var t = new Date(),\n              o = t.getFullYear() + \"-\" + t.getMonth() + \"-\" + t.getDate() + \"_\" + t.getHours() + \".\" + t.getMinutes() + \".\" + t.getSeconds(),\n              a = document.createElement(\"a\");\n          a.href = dataURL, a.download = \"pitchblack_\" + o + \".jpg\", a.click();\n      } else {\n        window.open(dataURL);\n      }\n    },\n\n    set_quality(value) {\n      this.scaling = 4 - value;\n      this.resize();\n    },\n\n    draw() {\n\n      if( !this.video){\n        return;\n      }\n\n      if (this.video.readyState !== this.video.HAVE_ENOUGH_DATA) {\n        return;\n      }\n\n      this.texture.update();\n\n      this.rawFBO.bind();\n      this.renderer.render(this.root, this.camera);\n\n      this.thresoldFBO.bind();\n      this.thresold.shader.use();\n      this.thresold.shader.setUniform('THRESHOLD', this.params[\"threshold\"]);\n      this.thresold.shader.setUniform('SOFT', this.params[\"soft\"]);\n      this.thresold.shader.setUniform('INVERT', this.params[\"invert\"]);\n      this.thresold.shader.setUniform('uTexture', this.rawFBO.texture);\n      this.renderer.render(this.thresold);\n\n      this.renderer.renderToScreen();\n      this.renderer.context.gl.viewport(0, 0, this.renderer.context.canvas.width, this.renderer.context.canvas.height);\n\n      this.post.shader.use();\n      this.post.shader.setUniform('WEIGHT', this.params[\"weight\"]);\n      this.post.shader.setUniform('DECAY_FACTOR', this.params[\"decay\"]);\n      //this.post.shader.setUniform('NUM_SAMPLES', this.params[\"samples\"]);\n      this.post.shader.setUniform('DENSITY', this.params[\"density\"]);\n      this.post.shader.setUniform('uTexture', this.thresoldFBO.texture);\n      this.renderer.render(this.post);\n\n    },\n\n    render(timestamp) {\n\n      // Throttle the frame rate.\n       if (timestamp < this.lastFrameTimeMs + (1000 / 50 )) {\n           requestAnimationFrame(this.render);\n           return;\n       }\n      this.lastFrameTimeMs = timestamp;\n\n      this.draw();\n\n      requestAnimationFrame(this.render);\n\n    },\n\n    resize(e) {\n\n      if( !this.video )\n        return;\n\n      var w = window.innerWidth,\n          h = window.innerHeight,\n          naturalAspectRatio = this.video.videoWidth/this.video.videoHeight\n\n      console.log( naturalAspectRatio)\n\n      // w = w > wCam ? wCam : w;\n      h = this.video.videoHeight;\n      w = h * naturalAspectRatio;\n\n      //var aspect = w / h;\n      // console.log(this.scaling, \":\",w / this.scaling, h / this.scaling);\n\n      this.rawFBO.resize(w / this.scaling, h / this.scaling);\n      this.postFBO.resize(w / this.scaling, h / this.scaling);\n      this.thresoldFBO.resize(w / this.scaling, h / this.scaling);\n\n      this.renderer.context.size(w / this.scaling, h / this.scaling, window.devicePixelRatio);\n      this.camera.projection = new SQR.ProjectionMatrix().perspective(70, naturalAspectRatio, 1, 1000);\n    }\n\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.js"],"sourceRoot":""}